"use strict";class History{static hashChange(t){if(History.isHistorySuppressed)return void History.setSuppressHistory(!1);const[s,...e]=History._getHashParts();let i=!1;if(!t||0===e.length)if(s===HASH_BLANK)i=!0;else{const t=History._getListElem(s);if(void 0===t)return"function"==typeof handleUnknownHash&&window.location.hash.length?void handleUnknownHash(s,e):void History._freshLoad();if(void 0===t.attr("id"))History._freshLoad();else{const s=t.attr("id");History.lastLoadedId=s,loadhash(s),document.title=decodeURIComponent(t.attr("title"))+" - 5etools"}}"function"==typeof loadsub&&e.length>0&&loadsub(e),i&&(window.location.hash="")}static init(t){window.onhashchange=History.hashChange,window.location.hash.length?History.hashChange():History._freshLoad(),t&&(History.initialLoad=!1)}static setSuppressHistory(t){History.isHistorySuppressed=t}static getSelectedListElement(){const[t,...s]=History._getHashParts();return History._getListElem(t)}static getSelectedListElementWithIndex(){const[t,...s]=History._getHashParts();return History._getListElem(t,!0)}static _getHashParts(){return window.location.hash.slice(1).split(HASH_PART_SEP)}static _getListElem(t,s){const e=`a[href="#${t.toLowerCase()}"]`,i=$("#listcontainer");if(i.data("lists"))for(let t=0;t<i.data("lists").length;++t){const o=i.data("lists")[t];for(let i=0;i<o.items.length;++i){const a=o.items[i],n=$(a.elm).find(e);if(n[0])return s?{$el:n,x:t,y:i}:n}}}static _freshLoad(){setTimeout(()=>{const t=$("#listcontainer").find(".list a").attr("href");t&&location.replace(t)},1)}static cleanSetHash(t){window.location.hash=t.replace(/,+/g,",").replace(/,$/,"").toLowerCase()}}History.lastLoadedId=null,History.initialLoad=!0,History.isHistorySuppressed=!1;