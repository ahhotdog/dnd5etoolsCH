"undefined"!=typeof require&&(require("../js/utils.js"),require("../js/entryrender.js"));class Omnidexer{constructor(e=0){this.index=[],this.id=e}getIndex(){return this.index}static getProperty(e,r){return r.split(".").reduce((e,r)=>e[r],e)}addToIndex(e,r,s){s&&(this.id+=s);const t=this.index;let o=this.id;const a=(r,s,t)=>{const a=Omnidexer.getProperty(r,e.source||"source"),i=e.hashBuilder?e.hashBuilder(r,t):UrlUtil.URL_TO_HASH_BUILDER[e.baseUrl](r),l={c:e.category,s:a,id:o++,u:i,p:Omnidexer.getProperty(r,e.page||"page")};return e.hover&&(l.h=1),Object.assign(l,s),l};Omnidexer.getProperty(r,e.listProp).forEach((r,s)=>{const o=Omnidexer.getProperty(r,e.primary||"name");if(!r.noDisplay){const i=a(r,{n:o},s);if(e.filter&&e.filter(r)||e.onlyDeep||t.push(i),e.deepIndex){const i={it:r,i:s,parentName:o};e.deepIndex(i,r).forEach(s=>{const o=a(r,s);e.filter&&e.filter(r)||t.push(o)})}}}),this.id=o}}Omnidexer.TO_INDEX__FROM_INDEX_JSON=[{category:1,dir:"bestiary",primary:"name",source:"source",page:"page",listProp:"monster",baseUrl:"bestiary.html",hover:!0},{category:2,dir:"spells",primary:"name",source:"source",page:"page",listProp:"spell",baseUrl:"spells.html",hover:!0},{category:5,dir:"class",primary:"name",source:"source",page:"page",listProp:"class",baseUrl:"classes.html",deepIndex:(e,r)=>r.subclasses.map(s=>({n:`${e.parentName}; ${s.name}`,s:s.source,u:`${UrlUtil.URL_TO_HASH_BUILDER[UrlUtil.PG_CLASSES](r)}${HASH_PART_SEP}${HASH_SUBCLASS}${UrlUtil.encodeForHash(s.name)}${HASH_SUB_LIST_SEP}${UrlUtil.encodeForHash(s.source)}`}))}],Omnidexer.TO_INDEX=[{category:3,file:"backgrounds.json",listProp:"background",baseUrl:"backgrounds.html",hover:!0},{category:4,file:"basicitems.json",listProp:"basicitem",baseUrl:"items.html",hover:!0},{category:6,file:"conditionsdiseases.json",listProp:"condition",baseUrl:"conditionsdiseases.html",hover:!0},{category:7,file:"feats.json",listProp:"feat",baseUrl:"feats.html",hover:!0},{category:8,file:"invocations.json",listProp:"invocation",baseUrl:"invocations.html",hover:!0},{category:4,file:"items.json",page:"page",listProp:"item",baseUrl:"items.html",hover:!0},{category:4,file:"items.json",page:"page",listProp:"itemGroup",baseUrl:"items.html",hover:!0},{category:9,file:"psionics.json",listProp:"psionic",baseUrl:"psionics.html",deepIndex:(e,r)=>r.modes?r.modes.map(r=>({d:1,n:`${e.parentName}; ${r.name}`})):[],hover:!0},{category:10,file:"races.json",listProp:"race",baseUrl:"races.html",onlyDeep:!0,deepIndex:(e,r)=>{return EntryRenderer.race._mergeSubrace(r).map(e=>({n:e.name,s:e.source,u:UrlUtil.URL_TO_HASH_BUILDER["races.html"](e)}))},hover:!0},{category:11,file:"rewards.json",listProp:"reward",baseUrl:"rewards.html",hover:!0},{category:12,file:"variantrules.json",listProp:"variantrule",baseUrl:"variantrules.html",deepIndex:(e,r)=>{const s=[];return r.entries.forEach(e=>{EntryRenderer.getNames(s,e)}),s.map(r=>({d:1,n:`${e.parentName}; ${r}`}))}},{category:13,file:"adventures.json",source:"id",listProp:"adventure",baseUrl:"adventure.html"},{category:4,file:"magicvariants.json",source:"inherits.source",page:"inherits.page",listProp:"variant",baseUrl:"items.html",hashBuilder:e=>UrlUtil.encodeForHash([e.name,e.inherits.source]),test_extraIndex:()=>{return UtilSearchIndex._test_getBasicVariantItems().map(e=>({c:4,u:UrlUtil.encodeForHash([e.name,e.source])}))},hover:!0},{category:14,file:"deities.json",postLoad:DataUtil.deity.doPostLoad,listProp:"deity",baseUrl:"deities.html",hover:!0,filter:e=>e.reprinted},{category:15,file:"objects.json",listProp:"object",baseUrl:"objects.html",hover:!0},{category:16,file:"trapshazards.json",listProp:"trap",baseUrl:"trapshazards.html",hover:!0},{category:17,file:"trapshazards.json",listProp:"hazard",baseUrl:"trapshazards.html",hover:!0},{category:18,file:"bookref-quick.json",listProp:"data.bookref-quick",baseUrl:"quickreference.html",hashBuilder:(e,r)=>`bookref-quick,${r}`,onlyDeep:!0,deepIndex:(e,r)=>{return r.entries.map(e=>e.name).map(r=>({n:r,u:`bookref-quick${HASH_PART_SEP}${e.i}${HASH_PART_SEP}${UrlUtil.encodeForHash(r.toLowerCase())}`,s:void 0}))}},{category:19,file:"cultsboons.json",listProp:"cult",baseUrl:"cultsboons.html",hover:!0},{category:20,file:"cultsboons.json",listProp:"boon",baseUrl:"cultsboons.html",hover:!0},{category:21,file:"conditionsdiseases.json",listProp:"disease",baseUrl:"conditionsdiseases.html",hover:!0}],"undefined"!=typeof module&&(module.exports.Omnidexer=Omnidexer);